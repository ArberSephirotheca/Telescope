fragment SmallGroupAssoicationInfo on small_groups {
    small_group_id
    # if group project is created, waht is the project id.
    small_group_projects{
        project{
            project_id
            title
        }
    }
    # If project roles are created, what are the role ids.
    small_group_roles{
        role_id
    }
        # If project channel  is created, what is the channel id and kind.
    small_group_channels{
        channel_id
        kind
    }
}

fragment ProjectAssociationInfo on projects{
    project_id
    title
    # If project roles are created, what are the role ids.
    project_roles{
        role_id
    }
        # If project channel  is created, what is the channel id and kind.
    project_channels{
        channel_id
        kind
    }
}


query SmallGroup($limit: Int!, $offset: Int!, $search: String!, $now: date!) {
    small_groups(limit: $limit, offset: $offset, order_by: [{title: asc}], where: {
        _or: [
            {title: {_ilike: $search}},
            {description: {_ilike: $search}},
        ]}
        ) { ...SmallGroupAssoicationInfo }
}

query Project($limit: Int!, $offset: Int!, $search: String!, $now: date!) {
    small_groups(limit: $limit, offset: $offset, order_by: [{title: asc}], where: {
        _or: [
            {title: {_ilike: $search}},
            {description: {_ilike: $search}},
        ]}
        ) { ...ProjectAssociationInfo }
}